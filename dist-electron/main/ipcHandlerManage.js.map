{"version":3,"sources":["../../electron/main/ipcHandlerManage.ts"],"sourcesContent":["import { app, ipcMain } from \"electron\";\nimport {\n    closeWindow,\n    minimize,\n    updateMaximize,\n    showWindow,\n    setBadgeCount,\n    blinkWindow,\n    handleWindowPort,\n    notificationShow,\n    notificationHide,\n    notificationHeight,\n    mediaPreviewShow,\n    mediaPreviewHide,\n} from \"./windowManage\";\nimport { IpcRenderToMain } from \"../constants\";\nimport { getStore } from \"./storeManage\";\nimport { setFeedURL, quitAndInstall } from \"../utils/autoUpdater\";\nimport {\n    cacheFile,\n    compareFiles,\n    saveAsFile,\n    previewFile,\n    log,\n    getFile,\n} from \"../utils\";\nimport { traySetImage } from \"./trayManage\";\n\nconst store = getStore();\n\nexport const setIpcMainListener = () => {\n    // window manage\n    ipcMain.handle(IpcRenderToMain.showWindow, showWindow);\n    ipcMain.handle(IpcRenderToMain.minimizeWindow, minimize);\n    ipcMain.handle(IpcRenderToMain.maxmizeWindow, updateMaximize);\n    ipcMain.handle(IpcRenderToMain.closeWindow, closeWindow);\n    ipcMain.handle(IpcRenderToMain.updateBadge, (_, { count }) => {\n        setBadgeCount(count);\n    });\n    ipcMain.handle(IpcRenderToMain.blinkWindow, (_, val) => {\n        traySetImage(val);\n        blinkWindow(val);\n    });\n    ipcMain.handle(IpcRenderToMain.getWindowPort, handleWindowPort);\n\n    // autoUpdater\n    ipcMain.handle(IpcRenderToMain.autoUpdater, (_, version) => {\n        setFeedURL(version);\n    });\n    ipcMain.handle(IpcRenderToMain.quitAndInstall, quitAndInstall);\n\n    // notificationWindow\n    ipcMain.handle(IpcRenderToMain.showNotification, notificationShow);\n    ipcMain.handle(IpcRenderToMain.hideNotification, notificationHide);\n    ipcMain.handle(IpcRenderToMain.heightNotification, (_, height) => {\n        notificationHeight(height);\n    });\n\n    // mediaPreviewWindow\n    ipcMain.handle(IpcRenderToMain.showMediaPreview, mediaPreviewShow);\n    ipcMain.handle(IpcRenderToMain.hideMediaPreview, mediaPreviewHide);\n\n    // data transfer\n    ipcMain.handle(IpcRenderToMain.setKeyStore, (_, { key, data }) => {\n        store.set(key, data);\n    });\n    ipcMain.handle(IpcRenderToMain.getKeyStore, (e, { key }) => {\n        return store.get(key);\n    });\n\n    ipcMain.handle(IpcRenderToMain.deleteKeyStore, (e, { key }) => {\n        return store.delete(key);\n    });\n    ipcMain.handle(IpcRenderToMain.getPackVersion, () => {\n        return app.getVersion();\n    });\n\n    // file handle\n    ipcMain.handle(IpcRenderToMain.compareFiles, async (e, params) => {\n        return await compareFiles(params);\n    });\n    ipcMain.handle(IpcRenderToMain.previewFile, async (e, params) => {\n        return await previewFile(params);\n    });\n    ipcMain.handle(IpcRenderToMain.saveAsFile, async (e, params) => {\n        try {\n            return await saveAsFile(params);\n        } catch (err) {\n            log.error(err);\n        }\n    });\n    ipcMain.handle(IpcRenderToMain.cacheFile, async (e, params) => {\n        try {\n            return await cacheFile(params);\n        } catch (err) {\n            log.error(err);\n        }\n    });\n    ipcMain.handle(IpcRenderToMain.getFile, async (e, params) => {\n        try {\n            return await getFile(params);\n        } catch (err) {\n            log.error(err);\n            throw new Error(err);\n        }\n    });\n};\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA6B;AAC7B,0BAaO;AACP,uBAAgC;AAChC,yBAAyB;AACzB,yBAA2C;AAC3C,mBAOO;AACP,wBAA6B;AAE7B,MAAM,YAAQ,6BAAS;AAEhB,MAAM,qBAAqB,MAAM;AAEpC,0BAAQ,OAAO,iCAAgB,YAAY,8BAAU;AACrD,0BAAQ,OAAO,iCAAgB,gBAAgB,4BAAQ;AACvD,0BAAQ,OAAO,iCAAgB,eAAe,kCAAc;AAC5D,0BAAQ,OAAO,iCAAgB,aAAa,+BAAW;AACvD,0BAAQ,OAAO,iCAAgB,aAAa,CAAC,GAAG,EAAE,MAAM,MAAM;AAC1D,2CAAc,KAAK;AAAA,EACvB,CAAC;AACD,0BAAQ,OAAO,iCAAgB,aAAa,CAAC,GAAG,QAAQ;AACpD,wCAAa,GAAG;AAChB,yCAAY,GAAG;AAAA,EACnB,CAAC;AACD,0BAAQ,OAAO,iCAAgB,eAAe,oCAAgB;AAG9D,0BAAQ,OAAO,iCAAgB,aAAa,CAAC,GAAG,YAAY;AACxD,uCAAW,OAAO;AAAA,EACtB,CAAC;AACD,0BAAQ,OAAO,iCAAgB,gBAAgB,iCAAc;AAG7D,0BAAQ,OAAO,iCAAgB,kBAAkB,oCAAgB;AACjE,0BAAQ,OAAO,iCAAgB,kBAAkB,oCAAgB;AACjE,0BAAQ,OAAO,iCAAgB,oBAAoB,CAAC,GAAG,WAAW;AAC9D,gDAAmB,MAAM;AAAA,EAC7B,CAAC;AAGD,0BAAQ,OAAO,iCAAgB,kBAAkB,oCAAgB;AACjE,0BAAQ,OAAO,iCAAgB,kBAAkB,oCAAgB;AAGjE,0BAAQ,OAAO,iCAAgB,aAAa,CAAC,GAAG,EAAE,KAAK,KAAK,MAAM;AAC9D,UAAM,IAAI,KAAK,IAAI;AAAA,EACvB,CAAC;AACD,0BAAQ,OAAO,iCAAgB,aAAa,CAAC,GAAG,EAAE,IAAI,MAAM;AACxD,WAAO,MAAM,IAAI,GAAG;AAAA,EACxB,CAAC;AAED,0BAAQ,OAAO,iCAAgB,gBAAgB,CAAC,GAAG,EAAE,IAAI,MAAM;AAC3D,WAAO,MAAM,OAAO,GAAG;AAAA,EAC3B,CAAC;AACD,0BAAQ,OAAO,iCAAgB,gBAAgB,MAAM;AACjD,WAAO,oBAAI,WAAW;AAAA,EAC1B,CAAC;AAGD,0BAAQ,OAAO,iCAAgB,cAAc,OAAO,GAAG,WAAW;AAC9D,WAAO,UAAM,2BAAa,MAAM;AAAA,EACpC,CAAC;AACD,0BAAQ,OAAO,iCAAgB,aAAa,OAAO,GAAG,WAAW;AAC7D,WAAO,UAAM,0BAAY,MAAM;AAAA,EACnC,CAAC;AACD,0BAAQ,OAAO,iCAAgB,YAAY,OAAO,GAAG,WAAW;AAC5D,QAAI;AACA,aAAO,UAAM,yBAAW,MAAM;AAAA,IAClC,SAAS,KAAK;AACV,uBAAI,MAAM,GAAG;AAAA,IACjB;AAAA,EACJ,CAAC;AACD,0BAAQ,OAAO,iCAAgB,WAAW,OAAO,GAAG,WAAW;AAC3D,QAAI;AACA,aAAO,UAAM,wBAAU,MAAM;AAAA,IACjC,SAAS,KAAK;AACV,uBAAI,MAAM,GAAG;AAAA,IACjB;AAAA,EACJ,CAAC;AACD,0BAAQ,OAAO,iCAAgB,SAAS,OAAO,GAAG,WAAW;AACzD,QAAI;AACA,aAAO,UAAM,sBAAQ,MAAM;AAAA,IAC/B,SAAS,KAAK;AACV,uBAAI,MAAM,GAAG;AACb,YAAM,IAAI,MAAM,GAAG;AAAA,IACvB;AAAA,EACJ,CAAC;AACL;","names":[],"file":"ipcHandlerManage.js"}