{"version":3,"sources":["../../electron/main/appManage.ts"],"sourcesContent":["import { app } from \"electron\";\nimport { isExistMainWindow, showWindow } from \"./windowManage\";\nimport { join } from \"node:path\";\nimport { isMac, isProd, isWin } from \"../utils\";\nimport { getStore } from \"./storeManage\";\n\nconst store = getStore();\n\napp.commandLine.appendSwitch(\"wm-window-animations-disabled\");\nexport const setSingleInstance = () => {\n  if (!app.requestSingleInstanceLock()) {\n    app.quit();\n    process.exit(0);\n  }\n\n  app.on(\"second-instance\", () => {\n    showWindow();\n  });\n};\n\nexport const setAppListener = (startApp: () => void) => {\n  app.on(\"ready\", () => {\n    isWin && app.setAppUserModelId(\"ET2\");\n  });\n  app.on(\"activate\", () => {\n    if (isExistMainWindow()) {\n      showWindow();\n    } else {\n      startApp();\n    }\n  });\n\n  app.on(\"window-all-closed\", () => {\n    if (isMac && !getIsForceQuit()) return;\n\n    app.quit();\n  });\n};\n\nexport const setAppGlobalData = () => {\n  const electronDistPath = join(__dirname, \"../\");\n  const distPath = join(electronDistPath, \"../dist\");\n  const publicPath = isProd ? distPath : join(electronDistPath, \"../public\");\n  global.pathConfig = {\n    electronDistPath,\n    distPath,\n    publicPath,\n    trayIcon: join(\n      publicPath,\n      `/icons/${isWin ? \"tray@2x.png\" : \"icon_16x16Template@2x.png\"}`,\n    ),\n    trayIconTip: join(\n      publicPath,\n      `/icons/${isWin ? \"tray@2x_tip.png\" : \"icon_16x16Template@2x.png\"}`,\n    ),\n    indexHtml: join(distPath, \"index.html\"),\n    notificationHtml: join(publicPath, \"notificationPage/index.html\"),\n    preload: join(__dirname, \"../preload/index.js\"),\n    mediaPreviewPreload: join(__dirname, \"../preload/mediaPreviewPreload.js\"),\n  };\n};\n\nexport const getIsForceQuit = () =>\n  store.get(\"closeAction\") === \"quit\" || global.forceQuit;\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAoB;AACpB,0BAA8C;AAC9C,uBAAqB;AACrB,mBAAqC;AACrC,yBAAyB;AAEzB,MAAM,YAAQ,6BAAS;AAEvB,oBAAI,YAAY,aAAa,+BAA+B;AACrD,MAAM,oBAAoB,MAAM;AACrC,MAAI,CAAC,oBAAI,0BAA0B,GAAG;AACpC,wBAAI,KAAK;AACT,YAAQ,KAAK,CAAC;AAAA,EAChB;AAEA,sBAAI,GAAG,mBAAmB,MAAM;AAC9B,wCAAW;AAAA,EACb,CAAC;AACH;AAEO,MAAM,iBAAiB,CAAC,aAAyB;AACtD,sBAAI,GAAG,SAAS,MAAM;AACpB,0BAAS,oBAAI,kBAAkB,KAAK;AAAA,EACtC,CAAC;AACD,sBAAI,GAAG,YAAY,MAAM;AACvB,YAAI,uCAAkB,GAAG;AACvB,0CAAW;AAAA,IACb,OAAO;AACL,eAAS;AAAA,IACX;AAAA,EACF,CAAC;AAED,sBAAI,GAAG,qBAAqB,MAAM;AAChC,QAAI,sBAAS,CAAC,eAAe;AAAG;AAEhC,wBAAI,KAAK;AAAA,EACX,CAAC;AACH;AAEO,MAAM,mBAAmB,MAAM;AACpC,QAAM,uBAAmB,uBAAK,WAAW,KAAK;AAC9C,QAAM,eAAW,uBAAK,kBAAkB,SAAS;AACjD,QAAM,aAAa,sBAAS,eAAW,uBAAK,kBAAkB,WAAW;AACzE,SAAO,aAAa;AAAA,IAClB;AAAA,IACA;AAAA,IACA;AAAA,IACA,cAAU;AAAA,MACR;AAAA,MACA,UAAU,qBAAQ,gBAAgB,2BAA2B;AAAA,IAC/D;AAAA,IACA,iBAAa;AAAA,MACX;AAAA,MACA,UAAU,qBAAQ,oBAAoB,2BAA2B;AAAA,IACnE;AAAA,IACA,eAAW,uBAAK,UAAU,YAAY;AAAA,IACtC,sBAAkB,uBAAK,YAAY,6BAA6B;AAAA,IAChE,aAAS,uBAAK,WAAW,qBAAqB;AAAA,IAC9C,yBAAqB,uBAAK,WAAW,mCAAmC;AAAA,EAC1E;AACF;AAEO,MAAM,iBAAiB,MAC5B,MAAM,IAAI,aAAa,MAAM,UAAU,OAAO;","names":[],"file":"appManage.js"}