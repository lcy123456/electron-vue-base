{"version":3,"sources":["../../electron/preload/index.ts"],"sourcesContent":["import { existsSync } from \"original-fs\";\nimport { app, contextBridge, ipcRenderer, shell } from \"electron\";\n\nconst getPlatform = () => {\n    if (process.platform === \"darwin\") {\n        return 4;\n    }\n    if (process.platform === \"win32\") {\n        return 3;\n    }\n    return 7;\n};\n\nconst subscribe = (channel: string, callback: (...args: any[]) => void) => {\n    ipcRenderer.on(channel, callback);\n};\n\nconst subscribeOnce = (channel: string, callback: (...args: any[]) => void) => {\n    ipcRenderer.once(channel, callback);\n};\n\nconst unsubscribe = (channel: string, callback: (...args: any[]) => void) => {\n    ipcRenderer.removeListener(channel, callback);\n};\n\nconst unsubscribeAll = (channel: string) => {\n    ipcRenderer.removeAllListeners(channel);\n};\n\nconst ipcInvoke = (channel: string, ...arg: any) => {\n    return ipcRenderer.invoke(channel, ...arg);\n};\n\nconst openExternal = (src: string) => {\n    shell.openExternal(src);\n};\n\nipcRenderer.on(\"notificationPort\", async (event) => {\n    window.postMessage(\"notificationPort\", \"*\", event.ports);\n});\n\nipcRenderer.on(\"mediaPreviewPort\", async (event) => {\n    window.postMessage(\"mediaPreviewPort\", \"*\", event.ports);\n});\n\nconst Api = {\n    getVersion: () => process.version,\n    getPlatform,\n    subscribe,\n    subscribeOnce,\n    unsubscribe,\n    unsubscribeAll,\n    ipcInvoke,\n    openExternal,\n};\nwindow.console.log(\"1111---222\");\ncontextBridge.exposeInMainWorld(\"electronAPI\", Api);\n"],"mappings":"AACA,sBAAuD;AAEvD,MAAM,cAAc,MAAM;AACtB,MAAI,QAAQ,aAAa,UAAU;AAC/B,WAAO;AAAA,EACX;AACA,MAAI,QAAQ,aAAa,SAAS;AAC9B,WAAO;AAAA,EACX;AACA,SAAO;AACX;AAEA,MAAM,YAAY,CAAC,SAAiB,aAAuC;AACvE,8BAAY,GAAG,SAAS,QAAQ;AACpC;AAEA,MAAM,gBAAgB,CAAC,SAAiB,aAAuC;AAC3E,8BAAY,KAAK,SAAS,QAAQ;AACtC;AAEA,MAAM,cAAc,CAAC,SAAiB,aAAuC;AACzE,8BAAY,eAAe,SAAS,QAAQ;AAChD;AAEA,MAAM,iBAAiB,CAAC,YAAoB;AACxC,8BAAY,mBAAmB,OAAO;AAC1C;AAEA,MAAM,YAAY,CAAC,YAAoB,QAAa;AAChD,SAAO,4BAAY,OAAO,SAAS,GAAG,GAAG;AAC7C;AAEA,MAAM,eAAe,CAAC,QAAgB;AAClC,wBAAM,aAAa,GAAG;AAC1B;AAEA,4BAAY,GAAG,oBAAoB,OAAO,UAAU;AAChD,SAAO,YAAY,oBAAoB,KAAK,MAAM,KAAK;AAC3D,CAAC;AAED,4BAAY,GAAG,oBAAoB,OAAO,UAAU;AAChD,SAAO,YAAY,oBAAoB,KAAK,MAAM,KAAK;AAC3D,CAAC;AAED,MAAM,MAAM;AAAA,EACR,YAAY,MAAM,QAAQ;AAAA,EAC1B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ;AACA,OAAO,QAAQ,IAAI,YAAY;AAC/B,8BAAc,kBAAkB,eAAe,GAAG;","names":[],"file":"index.js"}